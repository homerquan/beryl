<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-badge/paper-badge.html">
<link rel="import" href="../../styles/custom-styles.html">
<link rel="import" href="../../styles/share-styles.html">
<dom-module id="convospot-widget">
    <style include="custom-styles"></style>
    <style include="share-styles"></style>
    <template>
        <style include="shared-styles"></style>
        <style>
         :host {
            display: block;
            position: fixed;
            bottom: 10px;
            right: 10px;
            /*z-index: 10000;*/
            @apply(--layout);
            @apply(--layout-vertical);
            overflow-x: hidden;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            --color-one: #3d3d3d;
            --color-two: #9b4dca;
            --color-three: #C3C3E5;
            z-index: 1000;
        }

        .circle {
            z-index: 9;
            position: relative;
            display: block;
            box-sizing: border-box;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            opacity: 0.5;
            /*z-index: 10001;*/
            background: white;
            mix-blend-mode: darken;
            box-shadow: 0 2px 6px 0 rgba(0, 0, 0, .4);
            background: linear-gradient(-45deg, #4db2b3, #4a148c, #145aff, #ffffff);
            background-size: 400% 400%;
            -webkit-animation: Gradient 15s ease infinite;
            -moz-animation: Gradient 15s ease infinite;
            animation: Gradient 15s ease infinite;
        }

        .glow-border {
            z-index: 10;
            position: relative;
            display: block;
            box-sizing: border-box;
            width: 30px;
            height: 30px;
            margin: 16px;
            border-radius: 50%;
        }

        @-webkit-keyframes Gradient {
            0% {
                background-position: 0% 50%
            }
            50% {
                background-position: 100% 50%
            }
            100% {
                background-position: 0% 50%
            }
        }

        @-moz-keyframes Gradient {
            0% {
                background-position: 0% 50%
            }
            50% {
                background-position: 100% 50%
            }
            100% {
                background-position: 0% 50%
            }
        }

        @keyframes Gradient {
            0% {
                background-position: 0% 50%
            }
            50% {
                background-position: 100% 50%
            }
            100% {
                background-position: 0% 50%
            }
        }
        /* border motion */

        @-webkit-keyframes Glow {
            0% {
                box-shadow: 1px 1px 20px 0 rgb(74, 20, 140, 1);
            }
            50% {
                box-shadow: 1px 1px 5px 0 rgb(20, 90, 255, 1);
            }
            100% {
                box-shadow: 1px 1px 20px 0 rgb(74, 20, 140, 1);
            }
        }

        @-moz-keyframes Glow {
            0% {
                box-shadow: 1px 1px 20px 0 rgb(74, 20, 140, 1);
            }
            50% {
                box-shadow: 1px 1px 5px 0 rgb(20, 90, 255, 1);
            }
            100% {
                box-shadow: 1px 1px 20px 0 rgb(74, 20, 140, 1);
            }
        }

        @keyframes Glow {
            0% {
                box-shadow: 1px 2px 20px 0 rgb(74, 20, 140, 1);
            }
            50% {
                box-shadow: 1px 2px 5px 0 rgb(20, 90, 255, 1);
            }
            100% {
                box-shadow: 1px 2px 20px 0 rgb(74, 20, 140, 1);
            }
        }

        .dots {
            height: 24px;
            width: 24px;
            position: absolute;
            top: 4px;
            left: 3px;
        }

        .glow-true {
            box-shadow: 0 0px 30px 0 rgb(74, 20, 140, 1);
            animation: Glow 5s ease infinite;
        }

        .semi-show-true {
            opacity: 0.8;
        }

        paper-badge {
            left: 35px !important;
            top: 10px !important;
            opacity: 1.0;
            z-index: 11;
            --paper-badge-background: var(--paper-light-blue-300);
        }

        .circle:hover {
            opacity: 1;
        }

        .get-message-true {
            opacity: 1;
        }

        .training-box {
            position: absolute;
            bottom: 0;
            font-size: 0.65rem;
            background: #9013FE;
            padding: 3px;
            line-height: 0.5rem;
            font-weight: bolder;
            color: white;
            border-radius: 7px;
            right: 7px;
        }
        </style>
        <div>
            <div class$="glow-border glow-{{thinking}}">
                <div id="spot" class$="circle animated zoomIn show-{{connected}} semi-show-{{thinking}} get-message-{{_getMessage(badge)}}">
                    <img class="dots" src="../../images/dots.png" alt="a widget to lunch convospot"></img>
                </div>
            </div>
        </div>
        <template is="dom-if" if="{{badge}}">
            <paper-badge label="{{badge}}" role="status" aria-label="{{badge}}">
            </paper-badge>
        </template>
        <template is="dom-if" if="{{training}}">
            <div class="training-box">Learning</div>
        </template>
    </template>
    <script>
    (function() {
        'use strict';

        Polymer({
            is: 'convospot-widget',
            behaviors: [],
            properties: {
                connected: {
                    type: Boolean,
                    value: false,
                    notify: true
                },
                badge: {
                    type: Number,
                    value: 0,
                    notify: true
                },
                cid: {
                    type: String,
                    value: '',
                    notify: true
                },
                show: {
                    type: Boolean,
                    value: false,
                    notify: true
                },
                thinking: {
                    type: Boolean,
                    value: false,
                    notify: true
                },
                training: {
                    type: Boolean,
                    value: false,
                    notify: true
                },
            },
            _getMessage: function(counter) {
                if (counter > 0) {
                    return true
                } else {
                    return false;
                }
            },
        });
    })();
    </script>
</dom-module>